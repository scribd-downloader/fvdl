/* empty css               */(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))t(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const n of l.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&t(n)}).observe(document,{childList:!0,subtree:!0});function a(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function t(o){if(o.ep)return;o.ep=!0;const l=a(o);fetch(o.href,l)}})();(function(){const e={greenFormats:["17","18","22"],blueFormats:["139","140","141","249","250","251","599","600"],defaultColor:"#9e0cf2"};function i(n){if(!n||typeof n!="string")return console.error("Invalid URL provided to getVideoId:",n),null;if(!n.startsWith("http://")&&!n.startsWith("https://"))return console.warn("URL does not start with http:// or https://:",n),null;try{const r=new URL(n);if(["www.youtube.com","youtube.com","youtu.be"].includes(r.hostname)){if(r.hostname==="youtu.be"){const s=r.pathname.slice(1);return s.length===11?s:null}if(r.hostname.includes("youtube.com")){if(r.pathname.startsWith("/shorts/"))return r.pathname.split("/")[2];const s=r.searchParams.get("v");return s&&s.length===11?s:null}}if(["www.facebook.com","facebook.com","m.facebook.com","web.facebook.com"].includes(r.hostname)){if(r.pathname.startsWith("/reel/"))return r.pathname.split("/")[2];const s=r.pathname.match(/\/(?:videos?|reel)\/(\d+)/);if(s)return s[1]}return console.warn("Unrecognized video URL format:",n),null}catch(r){return console.error("Error parsing URL in getVideoId:",r),null}}function a(n){return DOMPurify.sanitize(n)}function t(n,r){const s=document.getElementById(n);s?s.innerHTML=r:console.warn(`Element with ID "${n}" not found.`)}function o(n,r=2,s=0){const d=[`/api/proxy?url=${encodeURIComponent(n)}`,`https://vkrdownloader.xyz/server?api_key=vkrdownloader&vkr=${encodeURIComponent(n)}`,`https://api.socialdownloader.com/api/facebook?url=${encodeURIComponent(n)}`,`https://cors-anywhere.herokuapp.com/https://vkrdownloader.xyz/server?api_key=vkrdownloader&vkr=${encodeURIComponent(n)}`],u=d[s]||d[0],I=r;$.ajax({url:u,type:"GET",cache:!1,async:!0,crossDomain:!0,dataType:"json",timeout:2e4,headers:{Accept:"application/json","Content-Type":"application/json"},success:function(y){console.log(`API ${s+1} succeeded:`,y),function(h){var k;if(document.getElementById("container").style.display="block",document.getElementById("loading").style.display="none",h.data){const c=h.data,m=c.downloads.map(f=>f.url),p=c.source,T=i(p),U=p&&(p.includes("youtube.com")||p.includes("youtu.be")),g=U&&T?`https://i.ytimg.com/vi/${T}/hqdefault.jpg`:c.thumbnail,E=`
  <video style='background: black url(${g}) center center/cover no-repeat; width:100%; height:500px; border-radius:20px;' 
         poster='${g}' controls playsinline>
      <source src='${((k=c.downloads[5])==null?void 0:k.url)||""}' type='video/mp4'>
      ${Array.isArray(m)?m.map(f=>`<source src='${f}' type='video/mp4'>`).join(""):""}
  </video>`,O=`
          <video style='background: black url(${g}) center center/cover no-repeat; width:100%; height:500px; border-radius:20px;' 
                 poster='${g}' controls playsinline>
              ${m.map(f=>`<source src='${f}' type='video/mp4'>`).join("")}
          </video>`,_=c.title?`<h3>${a(c.title)}</h3>`:"",j=c.description?`<h4><details><summary>View Description</summary>${a(c.description)}</details></h4>`:"",q=c.size?`<h4>${a(c.size)}</h4>`:"",V=c.uploader?`<div><i class="bi bi-person-circle me-2"></i>${a(c.uploader)}</div>`:"",F=c.extractor?`<div><i class="bi bi-gear me-2"></i>Extracted via: ${a(c.extractor)}</div>`:"",N=c.downloads&&c.downloads.length>0?`<div><i class="bi bi-link-45deg me-2"></i>Available formats: ${c.downloads.length}</div>`:"";t("thumb",U&&T?O:E),t("title",_),t("description",j),t("duration",q),t("uploader",V),t("extractor",F),t("downloadURL",N),function(f){const C=document.getElementById("download");if(C.innerHTML="",f.data){const P=f.data.downloads,R=f.data.source,Y=i(R);R&&(R.includes("youtube.com")||R.includes("youtu.be"))&&Y&&["mp3","360","720","1080"].forEach(w=>{const B=P&&P.length>0?P[0].url:R;C.innerHTML+=`
    <button class="dlbtns" style="background: #3f5974; color: white; font-weight: bold; margin: 5px;" onclick="forceDownload('${B}', 'video_${w}.mp4')">
      Download ${w.toUpperCase()}
    </button>`}),P.forEach(w=>{if(w&&w.url){const L=w.url;if(!L.startsWith("http://")&&!L.startsWith("https://"))return void console.warn("Invalid download URL:",L);const K=function(H,Q){H=H.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");const M=new RegExp(`[?&]${H}(=([^&#]*)|&|#|$)`).exec(Q);return M&&M[2]?decodeURIComponent(M[2].replace(/\+/g," ")):""}("itag",L),z=(B=K,e.greenFormats.includes(B)?"green":e.blueFormats.includes(B)?"#3800ff":e.defaultColor),S=w.format_id||"mp4",G=w.size||"Unknown size",J=z===e.defaultColor?"#3f5974":z,Z=`${(f.data.title||"video").replace(/[^a-zA-Z0-9]/g,"_").substring(0,50)}_${S}.mp4`;C.innerHTML+=`
<button class="dlbtns" style="background:${J}; color: white; font-weight: bold;" onclick="forceDownload('${L}', '${Z}')">
  ${a(S)} - ${a(G)}
</button>
`}var B})}else l("No download links found or data structure is incorrect."),document.getElementById("loading").style.display="none";C.innerHTML.trim()===""&&(l("Server Down due to Too Many Requests. Please contact us on Social Media @TheOfficialVKr."),document.getElementById("container").style.display="none")}(h)}else l("Issue: Unable to retrieve the download link. Please check the URL and contact us on Social Media @TheOfficialVKr."),document.getElementById("loading").style.display="none"}(y)},error:function(y,h,k){if(console.log(`API ${s+1} failed: ${u}`),s<d.length-1)console.log("Trying next API endpoint..."),setTimeout(()=>o(n,r,s+1),1e3);else if(r>0){let c=3e3*Math.pow(2,I-r);console.log(`All APIs failed. Retrying in ${c/1e3} seconds... (${r} attempts left)`),setTimeout(()=>o(n,r-1,0),c)}else{const c=function(m,p,T){const U=m.status;let g=`Status: ${p}, Error: ${T}`;if(m.responseText)try{const E=JSON.parse(m.responseText);E&&E.error&&(g+=`, Server Error: ${E.error}`)}catch{g+=", Unable to parse server response."}switch(U){case 0:return"Network Error: The server is unreachable.";case 400:return"Bad Request: The input URL might be incorrect.";case 401:return"Unauthorized: Please check the API key.";case 429:return"Too Many Requests: You are being rate-limited.";case 503:return"Service Unavailable: The server is temporarily overloaded.";default:return`${g}, HTTP ${U}: ${m.statusText||T}`}}(y,h,k);console.error(`All API endpoints failed. Error Details: ${c}`),l("Unable to fetch the download link after trying multiple services. This might be due to CORS restrictions or API limitations. Please try again later or contact support."),document.getElementById("loading").style.display="none"}},complete:function(){document.getElementById("downloadBtn").disabled=!1}})}function l(n){const r=document.getElementById("error");r?(r.innerHTML=a(n),r.style.display="block"):alert(n)}window.forceDownload=function(n,r="video.mp4"){if(console.log("Attempting to download:",n,"as",r),!n||typeof n!="string")return console.error("Invalid download URL:",n),void alert("Invalid download URL");fetch(n,{method:"HEAD"}).then(s=>{if(console.log("Download response:",s),!s.ok)throw new Error(`HTTP ${s.status}: ${s.statusText}`);const d=s.headers.get("Content-Type");console.log("Content-Type:",d),d&&(d.startsWith("video/")||d.startsWith("application/")||d.startsWith("audio/"))||console.warn("Unexpected content type, proceeding with download anyway");const u=document.createElement("a");u.href=n,u.download=r,u.target="_blank",document.body.appendChild(u),u.click(),document.body.removeChild(u)}).catch(s=>{console.error("Download failed:",s),window.open(n,"_blank")})},document.getElementById("downloadBtn").addEventListener("click",function(n,r){let s;return function(...d){clearTimeout(s),s=setTimeout(()=>n.apply(this,d),r)}}(function(){document.getElementById("loading").style.display="initial",document.getElementById("downloadBtn").disabled=!0;const n=document.getElementById("inputUrl").value.trim();if(!n)return l("Please enter a valid video URL."),document.getElementById("loading").style.display="none",void(document.getElementById("downloadBtn").disabled=!1);o(n)},300))})();const A={greenFormats:["17","18","22"],blueFormats:["139","140","141","249","250","251","599","600"],defaultColor:"#9e0cf2"};function X(e){return A.greenFormats.includes(e)?"green":A.blueFormats.includes(e)?"#3800ff":A.defaultColor}function ee(e,i){let a;return function(...t){clearTimeout(a),a=setTimeout(()=>e.apply(this,t),i)}}function W(e){if(!e||typeof e!="string")return console.error("Invalid URL provided to getVideoId:",e),null;if(!e.startsWith("http://")&&!e.startsWith("https://"))return console.warn("URL does not start with http:// or https://:",e),null;try{const i=new URL(e);if(["www.youtube.com","youtube.com","youtu.be"].includes(i.hostname)){if(i.hostname==="youtu.be"){const o=i.pathname.slice(1);return o.length===11?o:null}if(i.hostname.includes("youtube.com")){if(i.pathname.startsWith("/shorts/"))return i.pathname.split("/")[2];const o=i.searchParams.get("v");return o&&o.length===11?o:null}}if(["www.facebook.com","facebook.com","m.facebook.com","web.facebook.com"].includes(i.hostname)){if(i.pathname.startsWith("/reel/"))return i.pathname.split("/")[2];const o=i.pathname.match(/\/(?:videos?|reel)\/(\d+)/);if(o)return o[1]}return console.warn("Unrecognized video URL format:",e),null}catch(i){return console.error("Error parsing URL in getVideoId:",i),null}}function te(e,i="video.mp4"){if(console.log("Attempting to download:",e,"as",i),!e||typeof e!="string"){console.error("Invalid download URL:",e),alert("Invalid download URL");return}fetch(e,{method:"HEAD"}).then(a=>{if(console.log("Download response:",a),!a.ok)throw new Error(`HTTP ${a.status}: ${a.statusText}`);const t=a.headers.get("Content-Type");console.log("Content-Type:",t),(!t||!t.startsWith("video/")&&!t.startsWith("application/")&&!t.startsWith("audio/"))&&console.warn("Unexpected content type, proceeding with download anyway");const o=document.createElement("a");o.href=e,o.download=i,o.target="_blank",document.body.appendChild(o),o.click(),document.body.removeChild(o)}).catch(a=>{console.error("Download failed:",a),window.open(e,"_blank")})}window.forceDownload=te;function v(e){return DOMPurify.sanitize(e)}function b(e,i){const a=document.getElementById(e);a?a.innerHTML=i:console.warn(`Element with ID "${e}" not found.`)}function oe(e,i){e=e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");const t=new RegExp(`[?&]${e}(=([^&#]*)|&|#|$)`).exec(i);return!t||!t[2]?"":decodeURIComponent(t[2].replace(/\+/g," "))}function D(e,i=2,a=0){const t=[`/api/proxy?url=${encodeURIComponent(e)}`,`https://vkrdownloader.xyz/server?api_key=vkrdownloader&vkr=${encodeURIComponent(e)}`,`https://api.socialdownloader.com/api/facebook?url=${encodeURIComponent(e)}`,`https://cors-anywhere.herokuapp.com/https://vkrdownloader.xyz/server?api_key=vkrdownloader&vkr=${encodeURIComponent(e)}`],o=t[a]||t[0],l=3e3,n=i;$.ajax({url:o,type:"GET",cache:!1,async:!0,crossDomain:!0,dataType:"json",timeout:2e4,headers:{Accept:"application/json","Content-Type":"application/json"},success:function(r){console.log(`API ${a+1} succeeded:`,r),re(r)},error:function(r,s,d){if(console.log(`API ${a+1} failed: ${o}`),a<t.length-1)console.log("Trying next API endpoint..."),setTimeout(()=>D(e,i,a+1),1e3);else if(i>0){let u=l*Math.pow(2,n-i);console.log(`All APIs failed. Retrying in ${u/1e3} seconds... (${i} attempts left)`),setTimeout(()=>D(e,i-1,0),u)}else{const u=ne(r,s,d);console.error(`All API endpoints failed. Error Details: ${u}`),x("Unable to fetch the download link after trying multiple services. This might be due to CORS restrictions or API limitations. Please try again later or contact support."),document.getElementById("loading").style.display="none"}},complete:function(){document.getElementById("downloadBtn").disabled=!1}})}function ne(e,i,a){const t=e.status;let o=`Status: ${i}, Error: ${a}`;if(e.responseText)try{const l=JSON.parse(e.responseText);l&&l.error&&(o+=`, Server Error: ${l.error}`)}catch{o+=", Unable to parse server response."}switch(t){case 0:return"Network Error: The server is unreachable.";case 400:return"Bad Request: The input URL might be incorrect.";case 401:return"Unauthorized: Please check the API key.";case 429:return"Too Many Requests: You are being rate-limited.";case 503:return"Service Unavailable: The server is temporarily overloaded.";default:return`${o}, HTTP ${t}: ${e.statusText||a}`}}document.getElementById("downloadBtn").addEventListener("click",ee(function(){document.getElementById("loading").style.display="initial",document.getElementById("downloadBtn").disabled=!0;const e=document.getElementById("inputUrl").value.trim();if(!e){x("Please enter a valid video URL."),document.getElementById("loading").style.display="none",document.getElementById("downloadBtn").disabled=!1;return}D(e)},300));function x(e){const i=document.getElementById("error");i?(i.innerHTML=v(e),i.style.display="block"):alert(e)}function re(e,i){var a;if(document.getElementById("container").style.display="block",document.getElementById("loading").style.display="none",e.data){const t=e.data,o=t.downloads.map(p=>p.url),l=t.source,n=W(l),r=l&&(l.includes("youtube.com")||l.includes("youtu.be")),s=r&&n?`https://i.ytimg.com/vi/${n}/hqdefault.jpg`:t.thumbnail,d=`
  <video style='background: black url(${s}) center center/cover no-repeat; width:100%; height:500px; border-radius:20px;' 
         poster='${s}' controls playsinline>
      <source src='${((a=t.downloads[5])==null?void 0:a.url)||""}' type='video/mp4'>
      ${Array.isArray(o)?o.map(p=>`<source src='${p}' type='video/mp4'>`).join(""):""}
  </video>`,u=`
          <video style='background: black url(${s}) center center/cover no-repeat; width:100%; height:500px; border-radius:20px;' 
                 poster='${s}' controls playsinline>
              ${o.map(p=>`<source src='${p}' type='video/mp4'>`).join("")}
          </video>`,I=t.title?`<h3>${v(t.title)}</h3>`:"",y=t.description?`<h4><details><summary>View Description</summary>${v(t.description)}</details></h4>`:"",h=t.size?`<h4>${v(t.size)}</h4>`:"",k=t.uploader?`<div><i class="bi bi-person-circle me-2"></i>${v(t.uploader)}</div>`:"",c=t.extractor?`<div><i class="bi bi-gear me-2"></i>Extracted via: ${v(t.extractor)}</div>`:"",m=t.downloads&&t.downloads.length>0?`<div><i class="bi bi-link-45deg me-2"></i>Available formats: ${t.downloads.length}</div>`:"";r&&n?b("thumb",u):b("thumb",d),b("title",I),b("description",y),b("duration",h),b("uploader",k),b("extractor",c),b("downloadURL",m),se(e)}else x("Issue: Unable to retrieve the download link. Please check the URL and contact us on Social Media @TheOfficialVKr."),document.getElementById("loading").style.display="none"}function se(e,i){const a=document.getElementById("download");if(a.innerHTML="",e.data){const t=e.data.downloads,o=e.data.source,l=W(o);o&&(o.includes("youtube.com")||o.includes("youtu.be"))&&l&&["mp3","360","720","1080"].forEach(s=>{const d=t&&t.length>0?t[0].url:o;a.innerHTML+=`
    <button class="dlbtns" style="background: #3f5974; color: white; font-weight: bold; margin: 5px;" onclick="forceDownload('${d}', 'video_${s}.mp4')">
      Download ${s.toUpperCase()}
    </button>`}),t.forEach(r=>{if(r&&r.url){const s=r.url;if(!s.startsWith("http://")&&!s.startsWith("https://")){console.warn("Invalid download URL:",s);return}const d=oe("itag",s),u=X(d),I=r.format_id||"mp4",y=r.size||"Unknown size",h=u===A.defaultColor?"#3f5974":u,c=`${(e.data.title||"video").replace(/[^a-zA-Z0-9]/g,"_").substring(0,50)}_${I}.mp4`;a.innerHTML+=`
<button class="dlbtns" style="background:${h}; color: white; font-weight: bold;" onclick="forceDownload('${s}', '${c}')">
  ${v(I)} - ${v(y)}
</button>
`}})}else x("No download links found or data structure is incorrect."),document.getElementById("loading").style.display="none";a.innerHTML.trim()===""&&(x("Server Down due to Too Many Requests. Please contact us on Social Media @TheOfficialVKr."),document.getElementById("container").style.display="none")}
