/* empty css               */(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))o(t);new MutationObserver(t=>{for(const a of t)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function s(t){const a={};return t.integrity&&(a.integrity=t.integrity),t.referrerPolicy&&(a.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?a.credentials="include":t.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(t){if(t.ep)return;t.ep=!0;const a=s(t);fetch(t.href,a)}})();(function(){const e={greenFormats:["17","18","22"],blueFormats:["139","140","141","249","250","251","599","600"],defaultColor:"#9e0cf2"};function r(i){if(!i||typeof i!="string")return console.error("Invalid URL provided to getVideoId:",i),null;try{const n=new URL(i);if(["www.youtube.com","youtube.com","youtu.be"].includes(n.hostname)){if(n.hostname==="youtu.be"){const l=n.pathname.slice(1);return l.length===11?l:null}if(n.hostname.includes("youtube.com")){if(n.pathname.startsWith("/shorts/"))return n.pathname.split("/")[2];const l=n.searchParams.get("v");return l&&l.length===11?l:null}}if(["www.facebook.com","facebook.com","m.facebook.com","web.facebook.com"].includes(n.hostname)){if(n.pathname.startsWith("/reel/"))return n.pathname.split("/")[2];const l=n.pathname.match(/\/(?:videos?|reel)\/(\d+)/);if(l)return l[1]}return console.warn("Unrecognized video URL format:",i),null}catch(n){return console.error("Error parsing URL in getVideoId:",n),null}}function s(i){return DOMPurify.sanitize(i)}function o(i,n){const l=document.getElementById(i);l?l.innerHTML=n:console.warn(`Element with ID "${i}" not found.`)}function t(i,n=2,l=0){const m=[`/api/proxy?url=${encodeURIComponent(i)}`,`https://vkrdownloader.xyz/server?api_key=vkrdownloader&vkr=${encodeURIComponent(i)}`,`https://api.socialdownloader.com/api/facebook?url=${encodeURIComponent(i)}`,`https://cors-anywhere.herokuapp.com/https://vkrdownloader.xyz/server?api_key=vkrdownloader&vkr=${encodeURIComponent(i)}`],d=m[l]||m[0],I=n;$.ajax({url:d,type:"GET",cache:!1,async:!0,crossDomain:!0,dataType:"json",timeout:2e4,headers:{Accept:"application/json","Content-Type":"application/json"},success:function(h){console.log(`API ${l+1} succeeded:`,h),function(y){var k;if(document.getElementById("container").style.display="block",document.getElementById("loading").style.display="none",y.data){const c=y.data,p=c.downloads.map(f=>f.url),u=c.source,E=r(u),B=u&&(u.includes("youtube.com")||u.includes("youtu.be")),g=B&&E?`https://i.ytimg.com/vi/${E}/hqdefault.jpg`:c.thumbnail,T=`
  <video style='background: black url(${g}) center center/cover no-repeat; width:100%; height:500px; border-radius:20px;' 
         poster='${g}' controls playsinline>
      <source src='${((k=c.downloads[5])==null?void 0:k.url)||""}' type='video/mp4'>
      ${Array.isArray(p)?p.map(f=>`<source src='${f}' type='video/mp4'>`).join(""):""}
  </video>`,O=`
          <video style='background: black url(${g}) center center/cover no-repeat; width:100%; height:500px; border-radius:20px;' 
                 poster='${g}' controls playsinline>
              ${p.map(f=>`<source src='${f}' type='video/mp4'>`).join("")}
          </video>`,j=c.title?`<h3>${s(c.title)}</h3>`:"",q=c.description?`<h4><details><summary>View Description</summary>${s(c.description)}</details></h4>`:"",V=c.size?`<h4>${s(c.size)}</h4>`:"",N=c.uploader?`<div><i class="bi bi-person-circle me-2"></i>${s(c.uploader)}</div>`:"",_=c.extractor?`<div><i class="bi bi-gear me-2"></i>Extracted via: ${s(c.extractor)}</div>`:"",F=c.downloads&&c.downloads.length>0?`<div><i class="bi bi-link-45deg me-2"></i>Available formats: ${c.downloads.length}</div>`:"";o("thumb",B&&E?O:T),o("title",j),o("description",q),o("duration",V),o("uploader",N),o("extractor",_),o("downloadURL",F),function(f){const x=document.getElementById("download");if(x.innerHTML="",f.data){const Y=f.data.downloads,U=f.data.source,K=r(U);U&&(U.includes("youtube.com")||U.includes("youtu.be"))&&K&&["mp3","360","720","1080"].forEach(b=>{x.innerHTML+=`
    <button class="dlbtns" style="background: #3f5974; color: white; font-weight: bold; margin: 5px;" onclick="forceDownload('${U}', 'video_${b}.mp4')">
      Download ${b.toUpperCase()}
    </button>`}),Y.forEach(b=>{if(b&&b.url){const H=b.url,W=function(C,Q){C=C.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");const M=new RegExp(`[?&]${C}(=([^&#]*)|&|#|$)`).exec(Q);return M&&M[2]?decodeURIComponent(M[2].replace(/\+/g," ")):""}("itag",H),S=(P=W,e.greenFormats.includes(P)?"green":e.blueFormats.includes(P)?"#3800ff":e.defaultColor),z=b.format_id,G=b.size,J=S===e.defaultColor?"#3f5974":S;x.innerHTML+=`
<button class="dlbtns" style="background:${J}; color: white; font-weight: bold;" onclick="forceDownload('${H}', '${f.data.title||"video"}_${z}.mp4')">
  ${s(z)} - ${s(G)}
</button>
`}var P})}else a("No download links found or data structure is incorrect."),document.getElementById("loading").style.display="none";x.innerHTML.trim()===""&&(a("Server Down due to Too Many Requests. Please contact us on Social Media @TheOfficialVKr."),document.getElementById("container").style.display="none")}(y)}else a("Issue: Unable to retrieve the download link. Please check the URL and contact us on Social Media @TheOfficialVKr."),document.getElementById("loading").style.display="none"}(h)},error:function(h,y,k){if(console.log(`API ${l+1} failed: ${d}`),l<m.length-1)console.log("Trying next API endpoint..."),setTimeout(()=>t(i,n,l+1),1e3);else if(n>0){let c=3e3*Math.pow(2,I-n);console.log(`All APIs failed. Retrying in ${c/1e3} seconds... (${n} attempts left)`),setTimeout(()=>t(i,n-1,0),c)}else{const c=function(p,u,E){const B=p.status;let g=`Status: ${u}, Error: ${E}`;if(p.responseText)try{const T=JSON.parse(p.responseText);T&&T.error&&(g+=`, Server Error: ${T.error}`)}catch{g+=", Unable to parse server response."}switch(B){case 0:return"Network Error: The server is unreachable.";case 400:return"Bad Request: The input URL might be incorrect.";case 401:return"Unauthorized: Please check the API key.";case 429:return"Too Many Requests: You are being rate-limited.";case 503:return"Service Unavailable: The server is temporarily overloaded.";default:return`${g}, HTTP ${B}: ${p.statusText||E}`}}(h,y,k);console.error(`All API endpoints failed. Error Details: ${c}`),a("Unable to fetch the download link after trying multiple services. This might be due to CORS restrictions or API limitations. Please try again later or contact support."),document.getElementById("loading").style.display="none"}},complete:function(){document.getElementById("downloadBtn").disabled=!1}})}function a(i){const n=document.getElementById("error");n?(n.innerHTML=s(i),n.style.display="block"):alert(i)}document.getElementById("downloadBtn").addEventListener("click",function(i,n){let l;return function(...m){clearTimeout(l),l=setTimeout(()=>i.apply(this,m),n)}}(function(){document.getElementById("loading").style.display="initial",document.getElementById("downloadBtn").disabled=!0;const i=document.getElementById("inputUrl").value.trim();if(!i)return a("Please enter a valid video URL."),document.getElementById("loading").style.display="none",void(document.getElementById("downloadBtn").disabled=!1);t(i)},300))})();const L={greenFormats:["17","18","22"],blueFormats:["139","140","141","249","250","251","599","600"],defaultColor:"#9e0cf2"};function X(e){return L.greenFormats.includes(e)?"green":L.blueFormats.includes(e)?"#3800ff":L.defaultColor}function Z(e,r){let s;return function(...o){clearTimeout(s),s=setTimeout(()=>e.apply(this,o),r)}}function D(e){if(!e||typeof e!="string")return console.error("Invalid URL provided to getVideoId:",e),null;try{const r=new URL(e);if(["www.youtube.com","youtube.com","youtu.be"].includes(r.hostname)){if(r.hostname==="youtu.be"){const t=r.pathname.slice(1);return t.length===11?t:null}if(r.hostname.includes("youtube.com")){if(r.pathname.startsWith("/shorts/"))return r.pathname.split("/")[2];const t=r.searchParams.get("v");return t&&t.length===11?t:null}}if(["www.facebook.com","facebook.com","m.facebook.com","web.facebook.com"].includes(r.hostname)){if(r.pathname.startsWith("/reel/"))return r.pathname.split("/")[2];const t=r.pathname.match(/\/(?:videos?|reel)\/(\d+)/);if(t)return t[1]}return console.warn("Unrecognized video URL format:",e),null}catch(r){return console.error("Error parsing URL in getVideoId:",r),null}}function w(e){return DOMPurify.sanitize(e)}function v(e,r){const s=document.getElementById(e);s?s.innerHTML=r:console.warn(`Element with ID "${e}" not found.`)}function ee(e,r){e=e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");const o=new RegExp(`[?&]${e}(=([^&#]*)|&|#|$)`).exec(r);return!o||!o[2]?"":decodeURIComponent(o[2].replace(/\+/g," "))}function A(e,r=2,s=0){const o=[`/api/proxy?url=${encodeURIComponent(e)}`,`https://vkrdownloader.xyz/server?api_key=vkrdownloader&vkr=${encodeURIComponent(e)}`,`https://api.socialdownloader.com/api/facebook?url=${encodeURIComponent(e)}`,`https://cors-anywhere.herokuapp.com/https://vkrdownloader.xyz/server?api_key=vkrdownloader&vkr=${encodeURIComponent(e)}`],t=o[s]||o[0],a=3e3,i=r;$.ajax({url:t,type:"GET",cache:!1,async:!0,crossDomain:!0,dataType:"json",timeout:2e4,headers:{Accept:"application/json","Content-Type":"application/json"},success:function(n){console.log(`API ${s+1} succeeded:`,n),oe(n)},error:function(n,l,m){if(console.log(`API ${s+1} failed: ${t}`),s<o.length-1)console.log("Trying next API endpoint..."),setTimeout(()=>A(e,r,s+1),1e3);else if(r>0){let d=a*Math.pow(2,i-r);console.log(`All APIs failed. Retrying in ${d/1e3} seconds... (${r} attempts left)`),setTimeout(()=>A(e,r-1,0),d)}else{const d=te(n,l,m);console.error(`All API endpoints failed. Error Details: ${d}`),R("Unable to fetch the download link after trying multiple services. This might be due to CORS restrictions or API limitations. Please try again later or contact support."),document.getElementById("loading").style.display="none"}},complete:function(){document.getElementById("downloadBtn").disabled=!1}})}function te(e,r,s){const o=e.status;let t=`Status: ${r}, Error: ${s}`;if(e.responseText)try{const a=JSON.parse(e.responseText);a&&a.error&&(t+=`, Server Error: ${a.error}`)}catch{t+=", Unable to parse server response."}switch(o){case 0:return"Network Error: The server is unreachable.";case 400:return"Bad Request: The input URL might be incorrect.";case 401:return"Unauthorized: Please check the API key.";case 429:return"Too Many Requests: You are being rate-limited.";case 503:return"Service Unavailable: The server is temporarily overloaded.";default:return`${t}, HTTP ${o}: ${e.statusText||s}`}}document.getElementById("downloadBtn").addEventListener("click",Z(function(){document.getElementById("loading").style.display="initial",document.getElementById("downloadBtn").disabled=!0;const e=document.getElementById("inputUrl").value.trim();if(!e){R("Please enter a valid video URL."),document.getElementById("loading").style.display="none",document.getElementById("downloadBtn").disabled=!1;return}A(e)},300));function R(e){const r=document.getElementById("error");r?(r.innerHTML=w(e),r.style.display="block"):alert(e)}function oe(e,r){var s;if(document.getElementById("container").style.display="block",document.getElementById("loading").style.display="none",e.data){const o=e.data,t=o.downloads.map(u=>u.url),a=o.source,i=D(a),n=a&&(a.includes("youtube.com")||a.includes("youtu.be")),l=n&&i?`https://i.ytimg.com/vi/${i}/hqdefault.jpg`:o.thumbnail,m=`
  <video style='background: black url(${l}) center center/cover no-repeat; width:100%; height:500px; border-radius:20px;' 
         poster='${l}' controls playsinline>
      <source src='${((s=o.downloads[5])==null?void 0:s.url)||""}' type='video/mp4'>
      ${Array.isArray(t)?t.map(u=>`<source src='${u}' type='video/mp4'>`).join(""):""}
  </video>`,d=`
          <video style='background: black url(${l}) center center/cover no-repeat; width:100%; height:500px; border-radius:20px;' 
                 poster='${l}' controls playsinline>
              ${t.map(u=>`<source src='${u}' type='video/mp4'>`).join("")}
          </video>`,I=o.title?`<h3>${w(o.title)}</h3>`:"",h=o.description?`<h4><details><summary>View Description</summary>${w(o.description)}</details></h4>`:"",y=o.size?`<h4>${w(o.size)}</h4>`:"",k=o.uploader?`<div><i class="bi bi-person-circle me-2"></i>${w(o.uploader)}</div>`:"",c=o.extractor?`<div><i class="bi bi-gear me-2"></i>Extracted via: ${w(o.extractor)}</div>`:"",p=o.downloads&&o.downloads.length>0?`<div><i class="bi bi-link-45deg me-2"></i>Available formats: ${o.downloads.length}</div>`:"";n&&i?v("thumb",d):v("thumb",m),v("title",I),v("description",h),v("duration",y),v("uploader",k),v("extractor",c),v("downloadURL",p),ne(e)}else R("Issue: Unable to retrieve the download link. Please check the URL and contact us on Social Media @TheOfficialVKr."),document.getElementById("loading").style.display="none"}function ne(e,r){const s=document.getElementById("download");if(s.innerHTML="",e.data){const o=e.data.downloads,t=e.data.source,a=D(t);t&&(t.includes("youtube.com")||t.includes("youtu.be"))&&a&&["mp3","360","720","1080"].forEach(l=>{s.innerHTML+=`
    <button class="dlbtns" style="background: #3f5974; color: white; font-weight: bold; margin: 5px;" onclick="forceDownload('${t}', 'video_${l}.mp4')">
      Download ${l.toUpperCase()}
    </button>`}),o.forEach(n=>{if(n&&n.url){const l=n.url,m=ee("itag",l),d=X(m),I=n.format_id,h=n.size,y=d===L.defaultColor?"#3f5974":d;s.innerHTML+=`
<button class="dlbtns" style="background:${y}; color: white; font-weight: bold;" onclick="forceDownload('${l}', '${e.data.title||"video"}_${I}.mp4')">
  ${w(I)} - ${w(h)}
</button>
`}})}else R("No download links found or data structure is incorrect."),document.getElementById("loading").style.display="none";s.innerHTML.trim()===""&&(R("Server Down due to Too Many Requests. Please contact us on Social Media @TheOfficialVKr."),document.getElementById("container").style.display="none")}
